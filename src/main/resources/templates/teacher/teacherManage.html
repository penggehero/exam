<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>studentCenter</title>
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="../../static/css/bootstrap-theme.min.css" rel="stylesheet"/>
    <link href="../../static/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="shortcut icon" href="../../static/img/book.ico" type="image/x-icon"/>
    <script src="../../static/js/jquery-1.11.0.js"></script>
    <script src="../../static/js/bootstrap.js"></script>
</head>
<body>
<div style="height:80px;background-color: #337AB7;position: relative;left: 0;top: 0;">
    <span style="font-style: italic;font-size: 30px;color: white;position: absolute;top: 25%;left: 3%;">线上考试系统</span>
    <span style="font-style: italic;font-size: 20px;color: white;position: absolute;top: 50%;right: 3%;">(created by wupeng)</span>
</div>
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand">线上考试系统</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="#">首页 <span class="sr-only">(current)</span></a></li>
                <li class="active"><a href="#">考生信息管理</a></li>
                <li><a href="#">考生成绩查询</a></li>
                <li><a href="#">试卷管理</a></li>
                <li><a href="#">题目管理</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a>欢迎用户:</a></li>
                <li><a href="/">wp</a></li>
                <li><a href="/layout">退出系统</a></li>
            </ul>
        </div>
    </div>
</nav>
<!--内容-->
<form id="myForm" class="form-horizontal">
    <div class="form-group">
        <label for="id" class="col-sm-4 control-label">学号</label>
        <div class="col-sm-5">
            <input class="form-control" name="id" id="id" th:value="${session.id}"/>
        </div>
    </div>
    <div class="form-group">
        <label for="name" class="col-sm-4 control-label">姓名</label>
        <div class="col-sm-5">
            <input class="form-control" name="name" id="name" th:value="${session.name}">
        </div>
    </div>
    <div class="form-group" style="text-align: center">
        <button type="reset" class="btn btn-default">重置</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <button type="button" class="btn btn-info" onclick="btn()">搜索</button>
    </div>
</form>

<br><br>
<div>
    <table id="stuTable" class="table table-hover table-bordered" style="text-align: center;margin:0 auto; width: 80%;">
        <tr>
            <th style="text-align: center;height: 100%;line-height: 100%;">学号</th>
            <th style="text-align: center;height: 100%;line-height: 100%;">考生姓名</th>
            <th style="text-align: center;height: 100%;line-height: 100%;">年龄</th>
            <th style="text-align: center;height: 100%;line-height: 100%;">学校</th>
            <th style="text-align: center;height: 100%;line-height: 100%;">院系</th>
            <th style="text-align: center;height: 100%;line-height: 100%;">专业</th>
            <th style="text-align: center;height: 100%;line-height: 100%;">年级</th>
            <th style="text-align: center;height: 100%;line-height: 100%;">删除学生</th>
            <th style="text-align: center;height: 100%;line-height: 100%;">修改学生信息</th>
        </tr>
        <tr th:each="c:${page.data}">
            <td th:text="${c.id}"></td>
            <td th:text="${c.name}"></td>
            <td th:text="${c.age}"></td>
            <td th:text="${c.school}"></td>
            <td th:text="${c.college}"></td>
            <td th:text="${c.major}"></td>
            <td th:text="${c.grade}"></td>
            <td>
                <button type="button" class="btn btn-danger" th:value="${c.id}" onclick="btn1(this.value)">删除</button>
            </td>
            <td>
                <button type="button" class="btn btn-success" th:value="${c.id}" onclick="btn2(this.value)">修改</button>
            </td>
        </tr>
    </table>
    <br><br>
    <div style="margin:0 auto;padding-left:45% ">
        <!--分页-->
        <ul class="pagination">
            <!--前一页-->
            <li><a th:href="@{/teacher/manage(start=1)}">&laquo;</a></li>
            <td th:each="p:${page.integers}"  th:switch = "${page.currentPage}eq ${p}">
                <li  th:case="true" class="active">
                    <!-- 这个是当前页-->
                    <a th:href="@{/teacher/manage(start=${p})}" th:text="${p}">1</a>
                </li>
                <li  th:case="false">
                    <!-- 这个是不是当前页-->
                    <a th:href="@{/teacher/manage(start=${p})}" th:text="${p}">1</a>
                </li>
            </td>
            <!--后一页-->
            <li><a th:href="@{/teacher/manage(start=${page.getTotalPage()})}">&raquo;</a></li>
        </ul>
    </div>
</div>
</div>
<script>
    function btn() {
        window.location.href = "/teacher/manage?id=" + $("#id").val() + "&name=" + $("#name").val();
    }

    /*删除*/
    function btn1(value) {
        if(confirm("确实要删除吗？")){
            var val = {"sid": value};
           /* window.location.href = "/teacher/teachManager?id=" + id + "name=" + $("#name").val();*/
            $.ajax({
                url: "/teacher/delstudent",
                data: val,
                type: "POST",
                dataType: "json",
                async: false,
                cache: false,
                success: function (data) {
                    if (data.msg === "success") {
                        alert("删除成功!");
                        window.location.href = "/teacher/manage?id=" +  $("#id").val()  + "&name=" + $("#name").val();
                    }else{
                        alert(data.msg);
                    }
                },
                error: function (data) {
                    alert("发生未知错误!");
                }
            })
        }else {
        }

    }
    /*修改*/
    function btn2(value) {
        window.location.href = "/student/info?sid=" + value;
    }
    /*  $.ajax({
          url: "/teacher/manage",
          data: myfrom,
          type: "POST",
          dataType: "json",
          async: false,
          cache: false,
          success: function (data) {
              if (data.msg === "success") {
                  window.location.href="/teacher/studentList"+myfrom;
              }else{
                  alert(data.msg);
              }
          },
          error: function (data) {
              alert("发生未知错误!");
          }

      })
  };*/
</script>

<!--底部版权栏-->
<br><br><br><br><br><br><br><br>
<hr>
<table border="0" align="center">
    <tr>
        <td align="center">版权所有:wupeng</td>
        <td align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Copyright@2019</td>
    </tr>
</table>
</body>
</html>